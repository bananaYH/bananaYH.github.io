<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="linux网络操作系统-实训项目的实现, 不拿呐の博客">
    <meta name="description" content="网络安全＆编程">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>linux网络操作系统-实训项目的实现 | 不拿呐の博客</title>
    <link rel="icon" type="image/png" href="/medias/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.4.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">不拿呐の博客</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a target="_blank" rel="noopener" href="https://luoyunhao.com" class="waves-effect waves-light">
      
      <i class="fas fa-box-open" style="zoom: 0.6;"></i>
      
      <span>百宝箱</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a target="_blank" rel="noopener" href="https://img.luoyunhao.com" class="waves-effect waves-light">
      
      <i class="fas fa-images" style="zoom: 0.6;"></i>
      
      <span>图库</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">不拿呐の博客</div>
        <div class="logo-desc">
            
            网络安全＆编程
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a target="_blank" rel="noopener" href="https://luoyunhao.com" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-box-open"></i>
			
			百宝箱
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a target="_blank" rel="noopener" href="https://img.luoyunhao.com" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-images"></i>
			
			图库
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('https://cdn.jsdelivr.net/gh/bananaYH/images/img/3.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">linux网络操作系统-实训项目的实现</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/linux/">
                                <span class="chip bg-color">linux</span>
                            </a>
                        
                            <a href="/tags/%E8%BF%90%E7%BB%B4/">
                                <span class="chip bg-color">运维</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/linux/" class="post-category">
                                linux
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2021-05-30
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2021-06-16
                </div>
                

                

                

                
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="《Linux网络操作系统配置与管理》"><a href="#《Linux网络操作系统配置与管理》" class="headerlink" title="《Linux网络操作系统配置与管理》"></a>《Linux网络操作系统配置与管理》</h1><h2 id="一、项目规划"><a href="#一、项目规划" class="headerlink" title="一、项目规划"></a>一、项目规划</h2><p>本项目通过1台物理机和VMware Workstation软件,构建了一个具有4个内部子网、一个外部模拟公网、4台虚拟交换机和6台虚拟机的网络,网络拓扑图如图所示。</p>
<p><img src="https://oos.luoyunhao.com/blog-img/20210526112916.jpg" alt="img"></p>
<p>设备及IP地址分配见表15-5。</p>
<p><img src="https://oos.luoyunhao.com/blog-img/20210526113019.png" alt="image-20210526113019305"></p>
<h2 id="二、项目实训内容"><a href="#二、项目实训内容" class="headerlink" title="二、项目实训内容"></a>二、项目实训内容</h2><h3 id="任务1配置各虚拟机的网络参数和NAT服务-实现内部4个子网和外网的互连互通"><a href="#任务1配置各虚拟机的网络参数和NAT服务-实现内部4个子网和外网的互连互通" class="headerlink" title="任务1配置各虚拟机的网络参数和NAT服务,实现内部4个子网和外网的互连互通"></a>任务1配置各虚拟机的网络参数和NAT服务,实现内部4个子网和外网的互连互通</h3><p>为虚拟机①和虚拟机③添加所需数量的网卡,并根据表15-5的规划将各网卡连接至相应的虚拟交换机,配置所有虚拟机上各网卡的IP地址等网络参数。</p>
<p>在虚拟机①和虚拟机③上分别编辑各自的/usr/lib/sysctl.d/00-system.conf文件,以开启IP转发功能。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># vim /usr/lib/sysctl.d/00-system.conf 修改其配置文件</span>
在配置文件中添加 net.ipv4.ip_forward <span class="token operator">=</span> <span class="token number">1</span> 开启IP转发功能<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># sysctl -p /usr/lib/sysctl.d/00-system.conf  使配置文件立即生效</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>(3) 在虚拟机①上添加永久生效的静态路由,使得子网2、子网3和子网4中的客户机的数据包能到达外网。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># Vim /etc/sysconfig/network-scripts/route-“网卡设备名”</span>
<span class="token number">10.1</span>.80.0/24 via <span class="token number">192.168</span>.1.3 dev eth0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>(4)将虚拟机②、虚拟机④和虚拟机⑥的默认网关均设置为192.168.1.3,并在三台虚拟机上分别添加永久生效的静态路由,使其数据包能到达子网2、子网3和子网4中的客户机。</p>
<p>编辑 /etc/sysconfig/network-scripts/route-[网卡名] 文件，如果没有则根据网卡名自己创建</p>
<p>配置文件内容的格式如下：<br>ADDRESS0=X.X.X.X<br>NETMASK0=X.X.X.X<br>GATEWAY0=X.X.X.X </p>
<p>例：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># vim /etc/sysconfig/network-scripts/route-ens33</span>
<span class="token assign-left variable">ADDRESS0</span><span class="token operator">=</span><span class="token number">192.168</span>.2.0        <span class="token comment"># 目的网段</span>
<span class="token assign-left variable">NETMASK0</span><span class="token operator">=</span><span class="token number">255.255</span>.255.0
<span class="token assign-left variable">GATEWAY0</span><span class="token operator">=</span><span class="token number">192.168</span>.1.1        <span class="token comment"># 下一跳地址</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>配完重启网卡：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># systemctl restart network</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>(5)在虚拟机①上关闭所有防火墙。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># systemctl stop firewalld.service   关闭防火墙</span>
<span class="token comment"># systemctl disable firewalld.service 关闭防火墙自启 </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># vim /etc/selinux/config            进入配置文件将SELinux关闭</span>
将SELINUX<span class="token operator">=</span>enforcing 改为SELINUX<span class="token operator">=</span>disabled  关闭selinux<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>(6) 在虚拟机③上配置SNAT策略,使校园网内的所有计算机能访问外部的互联网。</p>
<p>划分区域：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># firewall-cmd --permanent --zone=external --change-interface=ens37 将ens37划为外部网络（ipv4网络地址伪装转发）</span>
<span class="token comment"># firewall-cmd --permanent --zone=internal --change-interface=ens33  将ens33划为内部网络</span>
<span class="token comment"># firewall-cmd --zone=internal --add-masquerade --permanent	设置特定区域的SNAT——IP伪装</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>如果不开启伪装IP，端口转发会失败（外网区域默认开启）；</p>
<p>开启伪装ip后默认允许所有ICMP通过</p>
</blockquote>
<p>内部访问外部，将source ip为src_nat网段来的数据包伪装成external(即ens37)的地址 </p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># firewall-cmd --zone=external --permanent --add-rich-rule=rule 'family="ipv4" source address="&lt;src_net/mask&gt;" masquerade'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>例：</p>
<p>Src_nat为192.168.2.0/24</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># firewall-cmd --zone=external --permanent --add-rich-rule='rule family="ipv4" source address="192.168.2.0/24" masquerade'  </span>

<span class="token comment"># firewall-cmd --zone=internal --add-service=dns --permanent</span>

<span class="token comment"># firewall-cmd --reload       重启防火墙策略</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>(7) 在虚拟机③外网卡上配置DNAT策略(端口转发),将内网中的Web网站、FTP站点、DNS服务(端口为53)和邮件服务器对外发布,使得互联网上的用户能访问内网中的Web网站、FTP站点、DNS服务和邮件服务器。</p>
<p>例：external_port为80，internal_ip为192.168.1.4</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># firewall-cmd --zone=external --permanent --add-forward-port=port=&lt;external_port&gt;:proto=tcp:toport=&lt;internal_port&gt;:toaddr=&lt;internal_ip&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>(8)使用“ping”命令测试网络的连通性。</p>
<h3 id="任务2-在局域网中实现DHCP功能"><a href="#任务2-在局域网中实现DHCP功能" class="headerlink" title="任务2:在局域网中实现DHCP功能"></a>任务2:在局域网中实现DHCP功能</h3><p>(1) 在虚拟机①上安装DHCP软件包,配置DHCP服务,为子网2、子网3和子网4分别创建一个对应的subnet作用域,且分配给子网2、子网3和子网4中的客户机的默认网关分别为192.168.2.1、192.168.3.1、192.168.4.1,分配的DNS的IP地址均为192.168.1.3。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># vim /etc/dhcp/dhcpd.conf</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>在配置文件中添加以下内容：</p>
<pre class="line-numbers language-none"><code class="language-none">subnet 192.168.2.0 netmask 255.255.255.0 {
  range 192.168.2.2 192.168.2.252; 
  option routers 192.168.2.1;      #设置网关
  default-lease-time 600;          #默认租约时间
  max-lease-time 7200;             #最大租约时间
  option domain-name-servers 192.168.1.2,192.168.1.3;
}

subnet 192.168.3.0 netmask 255.255.255.0 {
  range 192.168.3.2 192.168.3.252; 
  option routers 192.168.3.1;
  default-lease-time 600;
  max-lease-time 7200;
  option domain-name-servers 192.168.1.2,192.168.1.3;
  host boss { #主机名为boss
    hardware ethernet 00:0c:29:b6:03:07; #MAC地址是00:0c:29:b6:03:07的网卡
    fixed-address 192.168.3.58;    #分配给它192.168.3.58的IP
  }
  以上网卡绑定配置放到相应的subnet网段中
}

subnet 192.168.4.0 netmask 255.255.255.0 {
  range 192.168.4.2 192.168.4.252; 
  option routers 192.168.4.1;
  default-lease-time 600;
  max-lease-time 7200;
  option domain-name-servers 192.168.1.2,192.168.1.3;
}

(2) 设置将校长使用的计算机的网卡绑定到192.168.3.58地址<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>(3) 启动DHCP服务并设置开机自动启动。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># systemctl start dhcpd </span>
<span class="token comment"># systemctl enable dhcpd </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>(4)测试在子网2、子网3和子网4的客户机上能否自动获取IP地址等网络参数。</p>
<h3 id="任务3-搭建DNS服务器"><a href="#任务3-搭建DNS服务器" class="headerlink" title="任务3:搭建DNS服务器"></a>任务3:搭建DNS服务器</h3><p>杀掉virbr0的进程（该虚拟网卡占用了53端口）</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># netstat -ntulp | grep 53        查看进程号</span>
<span class="token comment"># kill -9 8589                    杀死进程 </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>防火墙允许通过</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># firewall-cmd --add-service=dns --permanent  将DNS配置为永久允许通过</span>

<span class="token comment"># firewall-cmd --reload            重启防火墙 </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>(1) 在虚拟机②和虚拟机③上分别安装Unbound DNS的软件包。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># mount /dev/cdrom /mnt</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>先mount挂载好光盘，再到Packages目录下运行以下命令</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># rpm -ivh unbound-1.4.20-28.el7.x86_64.rpm</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>(2) 在虚拟机②上编辑/etc/unbound/unbound.conf文件,将本主机配置为能解析域dyzx.edu的授权DNS服务器,并添加表15-6中的资源记录。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># vim /etc/unbound/unbound.conf   进入配置文件进行配置</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre class="line-numbers language-none"><code class="language-none"># The listen interfaces are not changed on reload, only on restart.

  interface: 0.0.0.0     将注释去掉，监听所有地址

# interface: ::0

 

# access-control: 0.0.0.0/0 refuse

  access-control: 0.0.0.0/0 allow    设置允许向本机查询的主机范围

# access-control: 127.0.0.0/8 allow<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p> <img src="https://oos.luoyunhao.com/blog-img/20210526113502.png" alt="image-20210526113502130"></p>
<p>在/etc/unbound/local.d/下新建一个.conf文件,例a.conf</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># vim a.conf      进入正反向域名配置文件进行配置</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>配置内容例（10.1.80网段自行配置）：</p>
<pre class="line-numbers language-none"><code class="language-none">local-zone: "dyzx.edu." static         设置解析的区域名

 

local-data: "www.dyzx.edu. 3600 IN A 192.168.1.4"   正向解析

local-data: "ftp.dyzx.edu. 3600 IN A 192.168.1.4"

 

local-data-ptr: "192.168.1.4 www.dyzx.edu."   反向解析

local-data-ptr: "192.168.1.4 ftp.dyzx.edu."<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># unbound-checkconf        检查语法错误</span>

<span class="token comment"># netstat -tunlp | grep unbound     查看监听端口</span>

<span class="token comment"># vim /etc/resolv.conf        </span>

<span class="token comment"># nameserver DNS服务器地址  配置本机DNS </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>(3) 在授权DNS上设置转发器,转发的IP地址是ISP提供的DNS服务器的IP地址(8.8.8.8)。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># vim /etc/unbound/unbound.conf</span>

forward-zone:       //定义转发forward
	name: “.”       //转发所有的查询
	forward-addr: <span class="token number">8.8</span>.8.8   //将解析请求转发到指定IP地址的DNS服务器<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>(4) 在虚拟机③上,通过配置文件/etc/unbound/unbound.conf将其配置为纯缓存DNS服务器,并设置转发地址为授权DNS服务器的IP地址。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># vim /etc/unbound/unbound.conf      修改配置文件</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre class="line-numbers language-none"><code class="language-none"># The listen interfaces are not changed on reload, only on restart.

  interface: 0.0.0.0     将注释去掉，监听所有地址

# interface: ::0



# access-control: 0.0.0.0/0 refuse

  access-control: 0.0.0.0/0 allow    设置允许向本机查询的主机范围

# access-control: 127.0.0.0/8 allow

domain-insecure: "dyzx.edu"   跳过验证域“dyzx.edu”,以避免信任链验证失败

forward-zone:       //定义转发forward
	name: “.”       //转发所有的查询
	forward-addr: 192.168.1.2    //将解析请求转发到指定IP地址的DNS服务器

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># drill www.dyzx.edu @ 192.168.1.3     测试DNS缓存</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>(5)在虚拟机②和虚拟机③上,分别启动DNS服务并设置开机自动启动,开放防火墙DNS服务流量。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># systemctl start unbound        启动服务</span>

<span class="token comment"># systemctl enable unbound       开机自启</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h3 id="任务4-架设Apache-Web站点"><a href="#任务4-架设Apache-Web站点" class="headerlink" title="任务4:架设Apache Web站点"></a>任务4:架设Apache Web站点</h3><p>(1)在虚拟机④上安装httpd服务软件包及相关依赖包。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># yum -y install httpd</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>(2)使用mkdir创建站点的根目录/var/www/myweb,使用echo创建默认首页文件。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># mkdir /var/www/myweb</span>

<span class="token comment"># echo "hello word" &gt; /var/www/myweb/index.html</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>(3)编辑httpd.conf配置文件,设置站点的侦听端口、IP地址、域名等信息。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># vim /etc/httpd/conf/httpd.conf			修改配置文件</span>

ServerName www.dyzx.edu:80     配置域名及端口号

DocumentRoot <span class="token string">"/var/www/myweb"</span>  配置站点根目录<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>(4)启动httpd服务并设置开机自动启动,开放防火墙的http服务流量。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># systemctl start httpd             启动httpd</span>

<span class="token comment"># systemctl enable httpd            开机自启</span>

<span class="token comment"># firewall-cmd --add-service=http --permanent   设置永久允许通过</span>

<span class="token comment"># firewall-cmd --reload             重启防火墙</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>(5)测试能否在任意子网中的客户机上通过域名访问Web网站。</p>
<h3 id="任务5-搭建vsftpd-FTP服务器"><a href="#任务5-搭建vsftpd-FTP服务器" class="headerlink" title="任务5:搭建vsftpd FTP服务器"></a>任务5:搭建vsftpd FTP服务器</h3><p>(1)在虚拟机④上安装vsftpd服务软件包。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># yum -y install vsftpd</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>(2)编辑vsftpd.conf主配置文件,允许所有员工使用匿名用户登录到/var/ftp/dyzx_data目录后下载资源。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># vim /etc/vsftpd/vsftpd.conf		  编辑ftp服务器配置文件</span>

<span class="token assign-left variable">anonymous_enable</span><span class="token operator">=</span>YES      允许匿名访问

<span class="token assign-left variable">anon_root</span><span class="token operator">=</span>/var/ftp/dyzx_data     设置匿名访问路径<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>(4) 建立用于维护(包括上传文件、创建目录、更新网页等权限)Web站点内容的只允许本地zhang3用户访问的 ftp站点,要求将zhang3用户锁定在目录/var/www/myweb中,不能进入其他任何目录。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># useradd -g ftp -d /var/www/myweb -s /sbin/nologin zhang3      创建用户</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># vim /etc/shells           </span>
/sbin/nologin            添加该行，将该shell添加到ftp可识别的shells文件中<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># vim /etc/vsftpd/vsftpd.conf		  编辑ftp服务器配置文件</span>

<span class="token assign-left variable">chroot_local_user</span><span class="token operator">=</span>NO                   设置是否锁定本地用户在自己的主目录中

<span class="token assign-left variable">chroot_list_enable</span><span class="token operator">=</span>YES                 是否开启列表名单限制（chroot_local_user为no时为限制名单，为yes时是限制白名单（不限制））

<span class="token assign-left variable">chroot_list_file</span><span class="token operator">=</span>/etc/vsftpd/chroot_list    定义哪些用户将会锁定在自己的主目录中

<span class="token assign-left variable">allow_writeable_chroot</span><span class="token operator">=</span>YES             手动添加该行<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># vim /etc/vsftpd/chroot_list       #创建并编辑文件</span>

将需要锁定的用户名逐行加入<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>(4)设置SELinux,允许本地用户登录FTP站点后具有写入权限。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># setsebool -P ftpd_full_access on   将SELinux中的防火墙设置为on，使得用户登录后可以进行上传和下载</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>(5) 修改本地权限使其他用户对/var/www/myweb目录具有读写权限。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># chmod 777 myweb/</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>(6)启动vsftpd服务并设置开机自动启动,开放防火墙ftp服务。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># systemctl start vsftpd       启动ftp服务</span>

<span class="token comment"># systemctl enable vsftpd	   开机自启</span>

<span class="token comment"># firewall-cmd --permanent --zone=public --add-service=ftp     永久开放ftp服务</span>

<span class="token comment"># firewall-cmd --reload       重启防火墙</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>(7)在任意子网的客户机上检测能否访问ftp站点并实施文件地上传和下载。</p>
<p>客户端先安装ftp Client</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># ftp 192.168.1.4(ftp服务器地址)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<h3 id="任务6-部署MariaDB数据库服务器-选作题"><a href="#任务6-部署MariaDB数据库服务器-选作题" class="headerlink" title="任务6:部署MariaDB数据库服务器(选作题)"></a>任务6:部署MariaDB数据库服务器(选作题)</h3><p>(1) 在虚拟机④上安装MariaDB软件包及相关依赖包。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># yum install MariaDB-server MariaDB-client -y                      安装MariaDB服务端和客户端</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>防火墙放行</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># firewall-cmd --permanent --add-service=mysql    防火墙放行</span>

<span class="token comment"># firewall-cmd --reload							 重启防火墙</span>

<span class="token comment"># systemctl start mariadb.service				  启动服务</span>

<span class="token comment"># systemctl enable mariadb.service			       开机自启</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># cp /usr/share/mysql/my-huge.cnf /etc/my.cnf     拷贝并覆盖配置文件</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>(2) 使用MariaDB的root用户登录MariaDB服务器,完成MariaDB数据库系统的安全初始化和汉化。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># /usr/bin/mysql_secure_installation</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>输入上述命令后，按照提示操作：</p>
<pre class="line-numbers language-none"><code class="language-none">
NOTE: RUNNING ALL PARTS OF THIS SCRIPTIS RECOMMENDED FOR ALL MariaDB

SERVERS IN PRODUCTION USE! PLEASE READ EACH STEP CAREFULLY!

In order to log into MariaDB to secure it, we'll need thecurrent

password for the root user. If you've just installed MariaDB, and

you haven't set the root password yet, the password willbe blank,

so you should just press enter here.

Enter current password for root (enter for none): 安装后默认没有root密码，直接回车

OK, successfully used password, moving on...

Setting the root password ensures that nobody can loginto the MariaDB

root user without the proper authorisation.

Set root password? [Y/n] Y

New password: 输入root的新密码

Re-enter new password: 新密码确认

Password updated successfully!

Reloading privilege tables..

 ... Success!

By default, a MariaDB installation has an anonymous user,allowing anyone

to log into MariaDB without having to have a user accountcreated for

them. This isintended only for testing, and to make the installation

go a bit smoother. You should remove them before moving into a

production environment.

Remove anonymous users? [Y/n] 删除匿名用户 Y

 ... Success!

Normally, root should only be allowed to connect from'localhost'. This

ensures that someone cannot guess at the root passwordfrom the network.

Disallow root login remotely? [Y/n] 关闭root远程登录 Y

 ... Success!

By default, MariaDB comes with a database named 'test'that anyone can

access. This isalso intended only for testing, and should be removed

before moving into a production environment.

Remove test database and access to it? [Y/n] 删除test数据库 Y

 - Dropping testdatabase...

 ... Success!

 - Removingprivileges on test database...

 ... Success!

Reloading the privilege tables will ensure that allchanges made so far

will take effect immediately.

Reload privilege tables now? [Y/n] 确定以上所有操作 Y

 ... Success!

Cleaning up...

All done! Ifyou've completed all of the above steps, your MariaDB

installation should now be secure.

Thanks for using MariaDB!<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>(3) 新建一个student的学生库,在其中创建一个名为course课程表。course表包括两个字段stu_id(学号)、stu_name(姓名),均为非空字符串值,初始学号值设为“20170000”,其中,stu_id字段被设为主键(PRIMARY KEY)。</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql"># mysql -u root -p

MariaDB [(none)]&gt; create database student;

MariaDB [(none)]&gt; use student;

MariaDB [student]&gt; create table course(stu_id int not null auto_increment,stu_name varchar(10) not null,primary key(stu_id))auto_increment=20170000;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>(4) 向student学生库中course表中插入两个学生的记录。并对有关记录进行显示、修改和删除操作。</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">MariaDB [student]&gt; insert into course(stu_name) values('luo');

MariaDB [student]&gt; insert into course(stu_name) values('liu');<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h3 id="任务7-配置NFS-选作题-和Samba共享服务"><a href="#任务7-配置NFS-选作题-和Samba共享服务" class="headerlink" title="任务7:配置NFS(选作题)和Samba共享服务"></a>任务7:配置NFS(选作题)和Samba共享服务</h3><p>(1)在虚拟机⑥上按照表15-7规划存储共享资源的目录结构,使用mkdir建立共享目录结构中的各个目录。</p>
<p><img src="https://oos.luoyunhao.com/blog-img/20210526113206.png" alt="image-20210526113206850"></p>
<p>(2) 在虚拟机⑥上安装NFS服务的相关软件包(RHEL7默认已安装)。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># yum install nfs-utils</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>(3)将共享目录/data的所有者修改为nfsnobody</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># chown nfsnobody /data</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>(4)编辑、加载、查看NFS服务的配置文件/etc/exports,使得所有用户可读/data_doc目录</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># vim /etc/exports</span>

/data_doc *<span class="token punctuation">(</span>ro,sync,insecure,no_root_squash<span class="token punctuation">)</span>           将该行添加进配置文件,配置目录属性<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>ro</td>
<td>只读访问</td>
</tr>
<tr>
<td>rw</td>
<td>读写访问</td>
</tr>
<tr>
<td>sync</td>
<td>所有数据在请求时写入共享</td>
</tr>
<tr>
<td>async</td>
<td>nfs在写入数据前可以响应请求</td>
</tr>
<tr>
<td>secure</td>
<td>nfs通过 1024 以下的安全 TCP/IP 端口发送</td>
</tr>
<tr>
<td>insecure</td>
<td>nfs通过 1024 以上的端口发送</td>
</tr>
<tr>
<td>hide</td>
<td>在 nfs 共享目录中不共享其子目录</td>
</tr>
<tr>
<td>no_hide</td>
<td>共享 nfs 目录的子目录</td>
</tr>
<tr>
<td>subtree_check</td>
<td>如果共享 /usr/bin 之类的子目录时，强制 nfs 检查父目录的权限（默认）</td>
</tr>
<tr>
<td>no_subtree_check</td>
<td>不检查父目录权限</td>
</tr>
<tr>
<td>root_squash</td>
<td>root用户的所有请求映射成如 anonymous 用户一样的权限（默认）</td>
</tr>
<tr>
<td>no_root_squash</td>
<td>root用户具有根目录的完全管理访问权限</td>
</tr>
</tbody></table>
<p>(5) 启动NFS服务并设置开机自动启动。开放防火墙的nfs、rpc-bind、mountd服务流量,允许外部主机访问。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># systemctl start rpcbind nfs  开启服务</span>

<span class="token comment"># systemctl enable rpcbind nfs  开机自启</span>

<span class="token comment"># firewall-cmd --permanent --add-service=nfs   防火墙允许通过</span>

<span class="token comment"># firewall-cmd --permanent --add-service=rpc-bind</span>

<span class="token comment"># firewall-cmd --permanent --add-service=mountd</span>

<span class="token comment"># firewall-cmd --reload       重启防火墙</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>测试：</p>
<p>在客户端上挂载目录</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># mount 192.168.1.6:/data_doc /share</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>可以正常查看文件即成功     </p>
<p>(6)在虚拟机⑥上确保在/etc/hosts和/etc/hostname两个文件中的主机名相同。</p>
<p>(7)在虚拟机⑥上安装有关Samba服务的软件包。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># yum -y install samba samba-client samba-swat</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>(8) 编辑Samba服务的主配置文件smb.conf。使得匿名用户可读取/dyzx_doc/share目录，重新启动SMB使配置生效,并设置开机自动启动。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># systemctl restart smb.service</span>

<span class="token comment"># systemctl enable smb.service</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># vim /etc/samba/smb.conf</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre class="line-numbers language-none"><code class="language-none">[global]
     map to guest = bad user         # 开启匿名登录功能,将无法识别的用户映射为guest用户

[public]                             
     comment = public
     path = /dyzx_doc/share
     guest ok = yes                  # 允许匿名用户登录
     read only = yes                 # 只允许读<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>(9)开启防火墙的Samba服务,允许Samba流量通过,将/dyzx_doc/share目录下所有内容的安全上下文修改为Samba服务默认策略的安全上下文。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># firewall-cmd --permanent --add-service=samba</span>

<span class="token comment"># firewall-cmd --reload</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>上下文配置：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># ll -dZ /dyzx_doc/share/      查看当前目录拓展</span>

<span class="token comment"># semanage fcontext -a -t samba_share_t "/dyzx_doc/share(/.*)?"  修改上下文</span>

<span class="token comment"># restorecon -Rv /dyzx_doc/share/                  刷新SELinux文件属性</span>

<span class="token comment"># ll -dZ /dyzx_doc/share/       检验</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>(9) 使用groupadd建立学生组gxs,教师组gjs,然后使用useradd命令添加各个师生员工的账号并加入相应的组。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># groupadd gxs</span>

<span class="token comment"># groupadd gjs</span>

<span class="token comment"># useradd -g gxs -s /sbin/nologin student</span>

<span class="token comment"># useradd -g gjs -s /sbin/nologin teacher </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>(10) 使用chmod设置目录及子目录和文件访问权限。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># chmod -R 777 /dyzx_doc/share</span>

<span class="token comment"># chmod -R 1777 /dyzx_doc/teacher    1代表不允许删除其他人资料</span>

<span class="token comment"># chmod -R 1777 /dyzx_doc/student</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>(12)使用pdbedit命令添加与Linux系统用户同名的Samba用户。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># pdbedit -a student    创建Samba账户</span>

<span class="token comment"># pdbedit -L       列出账户</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>(13) 开启SELinux,为共享目录及其所有文件添加samba_share_t标签类型,并使新的安全上下文立即生效。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># semanage fcontext -a -t samba_share_t "/dyzx_doc/teacher(/.*)?"  修改上下文</span>

<span class="token comment"># restorecon -Rv /dyzx_doc/teacher/</span>

<span class="token comment"># semanage fcontext -a -t samba_share_t "/dyzx_doc/student(/.*)?"  修改上下文</span>

<span class="token comment"># restorecon -Rv /dyzx_doc/student/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># setsebool -P samba_enable_home_dirs on          修改SELinux相关布尔值</span>

<span class="token comment"># setsebool -P samba_export_all_ro=1 samba_export_all_rw=1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>(14) 编辑Samba主配置文件smb.conf,按照表15-7规划的权限,分别对目录/dyzx_doc/student 、/dyzx_doc/teacher设置访问属性。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># vim /etc/samba/smb.conf</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>添加以下内容</p>
<pre class="line-numbers language-none"><code class="language-none">[teacher]
     comment = teacher
     path = /dyzx_doc/teacher                       # 根目录
     guest ok = no                                  # 是否允许匿名访问
     valid users = student,teacher,@gxs,@gjs         # 可读用户和组
     write list = teacher,@gjs                       # 可写用户和组

[student]
     comment = student
     path = /dyzx_doc/student
     guest ok = no
     valid users = student,teacher,@gxs,@gjs
     write list = student,teacher,@gxs,@gjs<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>(15) 在Windows/Linux客户端访问共享目录。</p>
<p>Linux：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># smbclient -U student //192.168.1.6/student</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>windows：</p>
<p><img src="https://oos.luoyunhao.com/blog-img/20210530203732.png" alt="image-20210530203732305"></p>
<p>这里使用了student用户登录</p>
<p><img src="https://oos.luoyunhao.com/blog-img/20210530203856.png" alt="image-20210530203856257"></p>
<p><img src="https://oos.luoyunhao.com/blog-img/20210530204005.png" alt="image-20210530204005249"></p>
<p>student用户无法在teacher目录下创建文件，测试成功</p>
<h3 id="任务8-搭建邮件服务器-选作题"><a href="#任务8-搭建邮件服务器-选作题" class="headerlink" title="任务8:搭建邮件服务器(选作题)"></a>任务8:搭建邮件服务器(选作题)</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># vim /etc/hostname</span>

mail.dyzx.edu      更改本机域名为mail.dyzx.edu<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>(1)在虚拟机⑥上安装Postfix、Dovecot软件包及相关依赖包。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># yum -y install postfix dovecot</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>(2)在Linux系统中创建stu1、stu2用户作为邮件服务器的用户。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># useradd -s /sbin/nologin stu1</span>

<span class="token comment"># useradd -s /sbin/nologin stu2</span>

<span class="token comment"># passwd stu1</span>

<span class="token comment"># passwd stu2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>(3)修改main.cf文件,使服务器具有基本的发信、收信功能。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># vim /etc/postfix/main.cf </span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>修改如下：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">myhostname <span class="token operator">=</span> mail.dyzx.edu     <span class="token comment"># 换成邮箱服务器</span>

mydomain <span class="token operator">=</span> dyzx.edu          <span class="token comment"># 换成你的域名</span>

myorigin <span class="token operator">=</span> <span class="token variable">$mydomain</span>         <span class="token comment"># 该参数含义为申请邮箱为 @$mydomain 结尾，如：luo@dyzx.edu    </span>

inet_interfaces <span class="token operator">=</span> all        <span class="token comment"># 可以接收所有域名的邮件</span>

mydestination <span class="token operator">=</span> <span class="token variable">$myhostname</span>, localhost.<span class="token variable">$mydomain</span>, localhost, <span class="token variable">$mydomain</span>          <span class="token comment"># 修改该行</span>

home_mailbox <span class="token operator">=</span> Maildir/      <span class="token comment"># 邮件存放的目录 </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>(3) 编辑Doveco服务的主配置文件/etc/dovecot/dovecot.conf,指定本邮件主机所运行的协议、监听的网络接口和允许登录的客户端的网段地址；</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># vim /etc/dovecot/dovecot.conf</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>修改如下：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">protocols <span class="token operator">=</span> imap pop3 lmtp    <span class="token comment"># 配置可支持提供的服务</span>

listen <span class="token operator">=</span> *             <span class="token comment"># 配置监听ip</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>(4) 编辑/etc/dovecot/conf.d/10-mail.conf及相应子配置文件,指定邮件存储格式;</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># vim /etc/dovecot/conf.d/10-auth.conf</span>
disable_plaintext_auth <span class="token operator">=</span> no            <span class="token comment"># no则为允许明文密码验证</span>
auth_mechanisms <span class="token operator">=</span> plain login          <span class="token comment"># 配置支持的认证方式</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># vim /etc/dovecot/conf.d/10-mail.conf</span>
mail_location <span class="token operator">=</span> maildir:~/Maildir      <span class="token comment"># 配置邮件存储格式及位置（Dovecot收邮件的方式一定要与Postfix收邮件方式相同）</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># vim /etc/dovecot/conf.d/10-ssl.conf</span>
ssl <span class="token operator">=</span> no                <span class="token comment"># 这里不使用ssl</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>(6)打开SELinux有关的布尔值。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># setsebool -P allow_postfix_local_write_mail_spool on</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h4 id="拓展：配置SMTP发信认证"><a href="#拓展：配置SMTP发信认证" class="headerlink" title="拓展：配置SMTP发信认证"></a>拓展：配置SMTP发信认证</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># yum -y install cyrus-sasl*          // 安装 cyrus-sasl 软件包</span>
<span class="token comment"># yum install -y dovecot saslauthd*   // 安装SMTP认证组件</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>配置sasl文件，实现使用sasl认证</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># vim /usr/lib64/sasl2/smtpd.conf    //编写sasl配置文件</span>
log_level: <span class="token number">3</span>
pwcheck_method: saslauthd
mech_list: PLAIN LOGIN<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>将sasl验证方式改为系统用户密码验证</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># vim /etc/sysconfig/saslauthd</span>
将MECH<span class="token operator">=</span>pam改为MECH<span class="token operator">=</span>shadow<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>SELinux允许相关服务</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># setsebool -P allow_saslauthd_read_shadow 1</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>重启sasl服务</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># systemctl restart saslauthd.service </span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>验证sasl工作是否正常</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># testsaslauthd -u stu1 -p passwd        //这里的账号和密码需为linux的用户名和密码</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>编辑postfix文件，配置sasl认证</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># vim /etc/postfix/main.cf</span>
broken_sasl_auth_clients <span class="token operator">=</span> <span class="token function">yes</span>
smtpd_recipient_restrictions <span class="token operator">=</span> permit_mynetworks,permit_sasl_authenticated,reject_invalid_hostname,reject_unknown_sender_domain,reject_non_fqdn_sender,reject_non_fqdn_recipient,reject_unknown_recipient_domain,reject_unauth_pipelining,reject_unauth_destination
smtpd_sasl_auth_enable <span class="token operator">=</span> <span class="token function">yes</span> 
smtpd_sasl_local_domain <span class="token operator">=</span> <span class="token variable">$myhostname</span>
smtpd_sasl_security_options <span class="token operator">=</span> noanonymous
smtpd_sasl_path <span class="token operator">=</span> smtpd <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># systemctl restart postfix.service   //重启服务，若重启失败，则关闭selinux（setenforce 0  临时关闭）</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>测试</p>
<p><img src="https://oos.luoyunhao.com/blog-img/20210530202657.png" alt="image-20210530202650816"></p>
<blockquote>
<p>这里的用户名和密码使用的是base64编码，例用户名stu1进行base64编码后的结果为c3R1MQ==</p>
</blockquote>
<p>(7)开启Firewalld防火墙允许SMTP、POP/IMAP服务流量。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># firewall-cmd --add-service=smtp --permanent</span>

<span class="token comment"># firewall-cmd --add-service=pop3 --permanent</span>

<span class="token comment"># firewall-cmd --add-service=imap --permanent</span>

<span class="token comment"># firewall-cmd --reload</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>(8) 启动Postfix、Dovecot服务并设置为开机自动启动。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># systemctl start postfix</span>

<span class="token comment"># systemctl start dovecot</span>

<span class="token comment"># systemctl enable postfix</span>

<span class="token comment"># systemctl enable dovecot</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>(9) 在客户端使用Outlook 2010/2013创建用户账号并进行邮件收发。</p>
<p>发送邮件：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># yum -y install telnet            安装telnet</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>例：</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># telnet mail.dyzx.edu 25</span>
Trying <span class="token number">10.1</span>.80.106<span class="token punctuation">..</span>.
Connected to mail.dyzx.edu.
Escape character is <span class="token string">'^]'</span><span class="token builtin class-name">.</span>
<span class="token number">220</span> mail.dyzx.edu ESMTP Postfix
mail from:stu1@dyzx.edu
<span class="token number">250</span> <span class="token number">2.1</span>.0 Ok
rcpt to:stu2@dyzx.edu
<span class="token number">250</span> <span class="token number">2.1</span>.5 Ok
data
<span class="token number">354</span> End data with <span class="token operator">&lt;</span>CR<span class="token operator">&gt;</span><span class="token operator">&lt;</span>LF<span class="token operator">&gt;</span>.<span class="token operator">&lt;</span>CR<span class="token operator">&gt;</span><span class="token operator">&lt;</span>LF<span class="token operator">&gt;</span>
helo:       
	this is mail<span class="token operator">!</span>
<span class="token builtin class-name">.</span>
<span class="token number">250</span> <span class="token number">2.0</span>.0 Ok: queued as 81C4E10BDAB5
quit
<span class="token number">221</span> <span class="token number">2.0</span>.0 Bye
Connection closed by foreign host.
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>查看邮件：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># telnet mail.dyzx.edu 110 </span>

Trying <span class="token number">192.168</span>.1.6<span class="token punctuation">..</span>.

Connected to localhost. 

Escape character is <span class="token string">'^]'</span><span class="token builtin class-name">.</span> 

+OK Dovecot ready. 

user stu1 

+OK 

pass 密码 

+OK 

Logged in. <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>list #列表查看邮件 </p>
<p>retr 1 #读取编号为1的邮件 </p>
<p>quit #退出邮箱</p>
</blockquote>
<p>Windows使用Outlook查看和发送邮件</p>
<p>先将Windows的DNS改为自己搭建的DNS服务器，确保网络连通</p>
<p>例：</p>
<p><img src="https://oos.luoyunhao.com/blog-img/20210526170230.png" alt="image-20210526170229975"></p>
<p><img src="https://oos.luoyunhao.com/blog-img/20210526170548.png" alt="image-20210526170548207"></p>
<p><img src="https://oos.luoyunhao.com/blog-img/20210526173527.png" alt="image-20210526173527137"></p>
<p><img src="https://oos.luoyunhao.com/blog-img/20210526173618.png" alt="image-20210526173617991"></p>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">BananaYH</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://BananaYH.github.io/2021/05/30/shi-xun/">https://BananaYH.github.io/2021/05/30/shi-xun/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">BananaYH</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/linux/">
                                    <span class="chip bg-color">linux</span>
                                </a>
                            
                                <a href="/tags/%E8%BF%90%E7%BB%B4/">
                                    <span class="chip bg-color">运维</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    
        <style>
    .valine-card {
        margin: 1.5rem auto;
    }

    .valine-card .card-content {
        padding: 20px 20px 5px 20px;
    }

    #vcomments textarea {
        box-sizing: border-box;
        background: url("/medias/comment_bg.png") 100% 100% no-repeat;
    }

    #vcomments p {
        margin: 2px 2px 10px;
        font-size: 1.05rem;
        line-height: 1.78rem;
    }

    #vcomments blockquote p {
        text-indent: 0.2rem;
    }

    #vcomments a {
        padding: 0 2px;
        color: #4cbf30;
        font-weight: 500;
        text-decoration: none;
    }

    #vcomments img {
        max-width: 100%;
        height: auto;
        cursor: pointer;
    }

    #vcomments ol li {
        list-style-type: decimal;
    }

    #vcomments ol,
    ul {
        display: block;
        padding-left: 2em;
        word-spacing: 0.05rem;
    }

    #vcomments ul li,
    ol li {
        display: list-item;
        line-height: 1.8rem;
        font-size: 1rem;
    }

    #vcomments ul li {
        list-style-type: disc;
    }

    #vcomments ul ul li {
        list-style-type: circle;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    #vcomments table, th, td {
        border: 0;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments h1 {
        font-size: 1.85rem;
        font-weight: bold;
        line-height: 2.2rem;
    }

    #vcomments h2 {
        font-size: 1.65rem;
        font-weight: bold;
        line-height: 1.9rem;
    }

    #vcomments h3 {
        font-size: 1.45rem;
        font-weight: bold;
        line-height: 1.7rem;
    }

    #vcomments h4 {
        font-size: 1.25rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    #vcomments h5 {
        font-size: 1.1rem;
        font-weight: bold;
        line-height: 1.4rem;
    }

    #vcomments h6 {
        font-size: 1rem;
        line-height: 1.3rem;
    }

    #vcomments p {
        font-size: 1rem;
        line-height: 1.5rem;
    }

    #vcomments hr {
        margin: 12px 0;
        border: 0;
        border-top: 1px solid #ccc;
    }

    #vcomments blockquote {
        margin: 15px 0;
        border-left: 5px solid #42b983;
        padding: 1rem 0.8rem 0.3rem 0.8rem;
        color: #666;
        background-color: rgba(66, 185, 131, .1);
    }

    #vcomments pre {
        font-family: monospace, monospace;
        padding: 1.2em;
        margin: .5em 0;
        background: #272822;
        overflow: auto;
        border-radius: 0.3em;
        tab-size: 4;
    }

    #vcomments code {
        font-family: monospace, monospace;
        padding: 1px 3px;
        font-size: 0.92rem;
        color: #e96900;
        background-color: #f8f8f8;
        border-radius: 2px;
    }

    #vcomments pre code {
        font-family: monospace, monospace;
        padding: 0;
        color: #e8eaf6;
        background-color: #272822;
    }

    #vcomments pre[class*="language-"] {
        padding: 1.2em;
        margin: .5em 0;
    }

    #vcomments code[class*="language-"],
    pre[class*="language-"] {
        color: #e8eaf6;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }

    #vcomments b,
    strong {
        font-weight: bold;
    }

    #vcomments dfn {
        font-style: italic;
    }

    #vcomments small {
        font-size: 85%;
    }

    #vcomments cite {
        font-style: normal;
    }

    #vcomments mark {
        background-color: #fcf8e3;
        padding: .2em;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }
</style>

<div class="card valine-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; padding-left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>评论</span>
    </div>
    <div id="vcomments" class="card-content" style="display: grid">
    </div>
</div>

<script src="/libs/valine/av-min.js"></script>
<script src="/libs/valine/Valine.min.js"></script>
<script type="text/javascript">
    var GUEST = ['nick', 'mail', 'link'];
    var meta = '';
    meta = meta.split(',').filter(function(item) {
        //return GUEST.indexOf(item) > -1;
    });

    var requiredFields = '';
    requiredFields  = requiredFields.split(',');

    new Valine({
        el: '#vcomments',
        appId: 'Ss3t2wm9MX9WpJdcmDARFL09-MdYXbMMI',
        appKey: 'BBlumzDLsTLcGbD21gIKoXOu',
        notify: 'false' === 'true',
        verify: 'false' === 'true',
        visitor: 'true' === 'true',
        avatar: 'robohash',
        pageSize: '10',
        lang: 'zh-cn',
        placeholder: 'just go go',
        recordIP: true,
        meta: ['nick','mail','link'],
        requiredFields: ['nick','mail'],
        enableQQ: true
    });
</script>

<!--酷Q推送-->


    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2021/06/11/windows-shi-xun/">
                    <div class="card-image">
                        
                        <img src="https://cdn.jsdelivr.net/gh/bananaYH/images/img/6.jpg" class="responsive-img" alt="windows实训">
                        
                        <span class="card-title">windows实训</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            Windows基础服务搭建
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2021-06-11
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/windows/" class="post-category">
                                    windows
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E8%BF%90%E7%BB%B4/">
                        <span class="chip bg-color">运维</span>
                    </a>
                    
                    <a href="/tags/windows/">
                        <span class="chip bg-color">windows</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2021/05/30/php-ji-chu/">
                    <div class="card-image">
                        
                        <img src="https://cdn.jsdelivr.net/gh/bananaYH/images/img/9.jpg" class="responsive-img" alt="PHP基础">
                        
                        <span class="card-title">PHP基础</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            PHP基础概念，对PHP的初步认识
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-05-30
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/PHP/" class="post-category">
                                    PHP
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/PHP/">
                        <span class="chip bg-color">PHP</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('220')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: 不拿呐の博客<br />'
            + '文章作者: BananaYH<br />'
            + '文章链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
    <div class="container row center-align" style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">   
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                &nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <span id="sitetime">载入运行时间...</span>
            <script>
                function siteTime() {
                    var seconds = 1000;
                    var minutes = seconds * 60;
                    var hours = minutes * 60;
                    var days = hours * 24;
                    var years = days * 365;
                    var today = new Date();
                    var startYear = "2021";
                    var startMonth = "4";
                    var startDate = "11";
                    var startHour = "0";
                    var startMinute = "0";
                    var startSecond = "0";
                    var todayYear = today.getFullYear();
                    var todayMonth = today.getMonth() + 1;
                    var todayDate = today.getDate();
                    var todayHour = today.getHours();
                    var todayMinute = today.getMinutes();
                    var todaySecond = today.getSeconds();
                    var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                    var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                    var diff = t2 - t1;
                    var diffYears = Math.floor(diff / years);
                    var diffDays = Math.floor((diff / days) - diffYears * 365);
                    var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                    var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                        minutes);
                    var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                        diffMinutes * minutes) / seconds);
                    if (startYear == todayYear) {
                        document.getElementById("year").innerHTML = todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已勉强运行 " + diffDays + " 天 " + diffHours +
                            " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    } else {
                        document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已勉强运行 " + diffYears + " 年 " + diffDays +
                            " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    }
                }
                setInterval(siteTime, 1000);
            </script>
            
            <br>
            
            <span id="icp">
                <a href="https://beian.miit.gov.cn" target="_blank">赣ICP备2021001349号-1</a>
            </span>
            
            &nbsp;|&nbsp;<span>本网站由</span>
            <a target="_blank" rel="noopener" href="https://www.upyun.com/?utm_source=lianmeng&amp;utm_medium=referral">
            <img src="/medias/又拍云_logo.png"align="absmiddle" width="59px" height="30px" /></a>
            <span>提供CDN加速/云储存服务</span>
            <br>
            Copyright&nbsp;&copy;
            
                <span id="year">2021</span>
            
            <span id="year">2021</span>
            <a href="/about" target="_blank">BananaYH</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>          

        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/BananaYH" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:812484798@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=812484798" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 812484798" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

<script>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?3ebe06c99ea365bcb49495a210885bd4";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    
    <script type="text/javascript" src="/libs/background/ribbon-dynamic.js" async="async"></script>
    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
